<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PharmaFormulator Pro | AI Edition</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>
</head>
<body>
    <div class="container" id="app-container">
        <div class="header">
            <h1 id="main-title">PharmaFormulator Pro <span style="font-size: 0.5em; color: var(--success);">AI Core</span></h1>
            <select id="lang" onchange="updateUI()">
                <option value="en">English</option>
                <option value="ar">Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©</option>
                <option value="fr">FranÃ§ais</option>
                <option value="de">Deutsch</option>
            </select>
        </div>

        <div class="config-grid">
            <div class="controls card">
                <div class="input-group">
                    <label id="lbl-api">API & Dose (mg)</label>
                    <div style="display: flex; gap: 5px;">
                        <input type="text" id="api-name" placeholder="Name">
                        <input type="number" id="api-dose" value="500">
                    </div>
                </div>
                <div class="input-group">
                    <label id="lbl-batch">Batch Size (Units)</label>
                    <input type="number" id="batch-units" value="10000">
                </div>
                <div class="input-group">
                    <label id="lbl-form">Dosage Form</label>
                    <select id="dosage-form">
                        <option value="tablet">Plain Tablet</option>
                        <option value="coated">Coated Tablet</option>
                        <option value="capsule">Capsule</option>
                        <option value="syrup">Liquid Syrup</option>
                    </select>
                </div>
                <div class="input-group">
                    <label id="lbl-ref">Pharmacopoeia Reference</label>
                    <select id="ref"><option>USP</option><option>BP</option><option>EUP</option></select>
                </div>
                <button class="btn-main" onclick="runAIFormulator()" id="btn-run">Analyze & Generate</button>
            </div>

            <div class="chart-box card">
                <canvas id="ctxChart"></canvas>
            </div>
        </div>

        <div class="result-section" id="results">
            <h2 id="res-title">Simulation Analysis</h2>
            
            <div class="summary-dashboard">
                <div class="sum-item"><strong>Unit Weight:</strong> <span id="sum-unit-weight">-</span></div>
                <div class="sum-item"><strong>Batch Weight:</strong> <span id="sum-batch-size">-</span></div>
                <div class="sum-item"><strong>Batch Cost:</strong> $<span id="sum-total-cost">-</span></div>
                <div class="sum-item"><strong>Reference:</strong> <span id="sum-ref">-</span></div>
            </div>

            <div class="ai-recommendation card">
                <h4 style="margin:0; color: var(--primary);">ðŸ¤– AI Smart Recommendation:</h4>
                <p id="ai-packaging-tip" style="font-style: italic;"></p>
                <p id="ai-logic-note" style="font-size: 0.85em; color: #666;"></p>
            </div>

            <table id="formula-table">
                <thead>
                    <tr><th id="th-m">Material</th><th id="th-r">Role</th><th id="th-q">Unit Qty</th><th id="th-bq">Batch Qty</th></tr>
                </thead>
                <tbody id="table-body"></tbody>
            </table>
            
            <button class="btn-pdf" onclick="downloadPDF()" id="btn-pdf">Export Professional Report</button>
        </div>

        <div class="legal-footer">
            <p>Â© 2026 PharmaFormulator Pro | Intellectually Protected | Commercial Use Requires License</p>
            <p><strong>Legal Disclaimer:</strong> Calculations based on AI-simulated algorithms. Final validation by Pharmacopoeia laboratory is mandatory.</p>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>
